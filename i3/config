### I3wm config by Pablo Sánchez 

# DISCLAIMER: This works on my computer; it's  a relatively simple and stable set up so it shouldn't be too hard to adapt to other systems.
# Most of this is based on the default config file generated by i3

## Dependencies and suggested:

# brightnessctl, xautolock, i3lock-fancy, picom, kitty, chromium, rofi, (suggested) rofi themes from https://github.com/lr-tech/rofi-themes-collection.git, flameshot (screenshot app), redshift, blueman

## SYSTEM SETUP

# Start XDG autostart .desktop files using dex. See also
# https://wiki.archlinux.org/index.php/XDG_Autostart
exec --no-startup-id dex --autostart --environment i3

# Unblock Bluetooth
exec --no-startup-id rfkill unblock bluetooth

# using xautolock and i3lock-fancy works better
exec --no-startup-id xautolock -time 10 -locker i3lock-fancy -detectsleep

# NetworkManager is the most popular way to manage wireless networks on Linux,
# and nm-applet is a desktop environment-independent system tray GUI for it.
exec --no-startup-id nm-applet

# Use pactl to adjust volume in PulseAudio.
set $refresh_i3status killall -SIGUSR1 i3status

set $feh_bg_folder ~/Pictures/Wallpapers
# random wallpapers with feh
exec --no-startup-id feh --bg-scale --randomize $feh_bg_folder

## Choose one of the following two rules for picom composer: 1 for basic terminal background transparency;
## 2 for more bling with bluring and rounded corners; or neither, or make your own: 
# Simple option
# More bling
exec_always --no-startup-id picom --backend xrender --blur-background --blur-method box --corner-radius 10   
# script to give touchpad "natural scrolling" and tap-to-click
exec --no-startup-id ~/.config/scripts/touchpad.sh
# use redshift to change screen color temperature dinamically
exec_once --no-startup-id redshift -t 5500:3600 -m randr


## VARIABLES

# Set "Windows key" as main modifier
set $mod Mod4

# Main font for window titles
# Or change this to any font you like and have installed
font pango:Avdira Regular 10        

# Use $mod and click on the title bar of a floating window to drag it around
floating_modifier $mod              

# move tiling windows via drag & drop by left-clicking into the title bar, 
# or left-clicking anywhere into the window while holding the floating modifier.
tiling_drag modifier titlebar       

# Set up to 10 workspaces (may be overkill, but ypu never know) and set a variable and default title
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

gaps inner 8
#gaps outer 10
smart_gaps off

# Color schemes for windows 
set $bgcolor    #505050
set $in-bgcolor #363636
set $text       #ffffff
set $u-bgcolor  #ff0000
set $indicator  #a8a3c1
set $in-text    #969696
#                       border          background      text            indicator (a line which shows where the next window will be placed)     
client.focused          $bgcolor        $bgcolor        $text           $indicator
client.unfocused        $in-bgcolor     $in-bgcolor     $in-text        $in-bgcolor
client.focused_inactive $in-bgcolor     $in-bgcolor     $in-text        $in-bgcolor
client.urgent           $u-bgcolor      $u-bgcolor      $text           $u-bgcolor


## STATUS BAR

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
status_command i3status -c ~/.config/i3status/i3status.conf
font pango:Avdira Regular 12
colors {
    background #505050
    statusline #ffffff
}	
}

## KEYBINDS

# System
# Use pactl to adjust volume in PulseAudio.
set $refresh_i3status killall -SIGUSR1 i3status
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && $refresh_i3status
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && $refresh_i3status
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

# Use brightnessctl to decrease and increase brightness
# Make sure user is in 'Video' group for this to work: 'sudo usermod -a -G video $USER'
bindsym XF86MonBrightnessDown exec --no-startup-id brightnessctl set 10-
bindsym XF86MonBrightnessUp exec --no-startup-id brightnessctl set +10

# reload the configuration file
bindsym $mod+Ctrl+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Ctrl+r restart
# Suspend
bindsym $mod+Ctrl+s exec systemctl suspend  
# Lock
bindsym $mod+Ctrl+l exec i3lock-fancy


# Window Manager
# kill focused window
bindsym $mod+q kill

# change focus
bindsym $mod+j focus left
bindsym $mod+k focus down
bindsym $mod+l focus up
# change this to ';' if using English keyboard:
bindsym $mod+ntilde focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
#bindsym $mod+Shift+j move left
#bindsym $mod+Shift+k move down
#bindsym $mod+Shift+l move up
#bindsym $mod+Shift+ntilde move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Split, container layout and flloat
bindsym $mod+h split h
bindsym $mod+v split v
bindsym $mod+f fullscreen toggle
bindsym $mod+s layout stacking
bindsym $mod+t layout tabbed
bindsym $mod+e layout toggle split
bindsym $mod+Shift+space floating toggle

bindsym $mod+d focus child
bindsym $mod+a focus parent

# switch to workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym j resize shrink width 10 px or 10 ppt
        bindsym k resize grow height 10 px or 10 ppt
        bindsym l resize shrink height 10 px or 10 ppt
        bindsym ntilde resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape or $mod+r
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"


# App Launchers

# Default Apps
set $term kitty
set $browser chromium
set $fileMan nautilus
set $textEditor code

# Rule to make kitty floating when launched with specific title
for_window [title="floating-term"] floating enable

# launch the default terminal
bindsym $mod+Return exec $term
# launch a floating terminal
bindsym $mod+Shift+Return exec --no-startup-id $term --title floating-term
# launch the default browser
bindsym $mod++Shift+w exec $Browser
# launch the default file manager
bindsym $mod+Shift+f exec $fileMan
# Take screenshot of full desktop              
bindsym Print exec flameshot full
# Open flameshot gui for extra funtions
bindsym $mod+Print exec flameshot gui
# Open default text editor
bindsym $mod+Shift+t exec $textEditor


# Menus
# rofi main app menu
bindsym $mod+space exec --no-startup-id rofi -show drun
# rofi open windows menu
bindsym $mod+Tab exec --no-startup-id rofi -show window
# rofi power menu
bindsym $mod+Ctrl+p exec ~/.config/scripts/powermenu.sh